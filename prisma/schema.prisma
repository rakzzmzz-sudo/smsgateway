generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// ==========================================
// 1. HTTP Clients (DeliverSM & DLR Throwers)
// ==========================================
model HttpClientConnector {
  id        String   @id @default(uuid())
  cid       String   @unique // e.g. "dlr_webhook_main"
  url       String
  method    String   @default("POST")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ==========================================
// 2. SMPP Server API (SMPP Client Connections)
// ==========================================
model SmppUser {
  id        String   @id @default(uuid())
  uid       String   @unique // e.g. "client_test_1"
  password  String
  groupId   String   @default("customers")
  bound     Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ==========================================
// 3. Restful & HTTP APIs (HTTP Client Connections)
// ==========================================
model HttpApiUser {
  id        String   @id @default(uuid())
  uid       String   @unique // e.g. "marketing_app"
  password  String
  groupId   String   @default("api_users")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ==========================================
// 4. Routing & Filters
// ==========================================
model Filter {
  id                String   @id @default(uuid())
  fid               String   @unique
  type              String   // "UserFilter", "DestinationAddrFilter", "SourceAddrFilter"
  parameter         String   // The filter argument e.g. "client_test_1" or "^\+6012"
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model Route {
  id          String   @id @default(uuid())
  order       Int
  type        String   // "DefaultRoute", "StaticMTRoute", "StaticMORoute"
  direction   String   // "MT" or "MO"
  connectorId String   // e.g. "smppc(celcom_out)" or "http(dlr_webhook)"
  filters     String   // Comma separated list of FIDs, or empty if DefaultRoute
  rate        Float    @default(0.0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
